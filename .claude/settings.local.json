{
  "permissions": {
    "allow": [
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git checkout:*)",
      "Bash(git reset:*)",
      "Bash(git push)",
      "Bash(dir:*)",
      "Bash(npm run build:*)",
      "Bash(npx tsc:*)",
      "Bash(pnpm exec tsc:*)",
      "Bash(pnpm run build)",
      "Bash(ls:*)",
      "Bash(test:*)",
      "Bash(git mv:*)",
      "Bash(wc:*)",
      "Bash(rg:*)",
      "Bash(for:*)",
      "Bash(find:*)",
      "Bash(do:*)",
      "Bash(done)",
      "Bash(git diff:*)",
      "Bash(git rm:*)",
      "Bash(mkdir:*)",
      "Bash(rmdir:*)",
      "Bash(pnpm exec vite build:*)",
      "Bash(pnpm --filter @pixsim7/main exec vite build:*)",
      "Bash(pnpm:*)",
      "Bash(cat:*)",
      "Bash(xargs sed -i \"s|from ''@/stores/graphStore''|from ''@features/graph''|g\")",
      "Bash(xargs sed -i \"s|from ''@/stores/arcGraphStore''|from ''@features/graph''|g\")",
      "Bash(python:*)",
      "Bash(PYTHONPATH=. python:*)",
      "Bash(git restore:*)",
      "Bash(grep:*)",
      "Bash(xargs sed -i \"s|from ''@/types''|from ''@/lib/registries''|g\")",
      "Bash(npm ls)",
      "Bash(while read dir)",
      "Bash(then echo \"$dir\")",
      "Bash(fi)",
      "Bash(powershell -Command \"New-Item -ItemType Directory -Force -Path ''C:\\Users\\Stefan\\.claude\\plans''\")",
      "Bash(chmod:*)",
      "Bash(powershell -Command:*)",
      "Bash(xargs sed:*)",
      "Bash(then echo \"‚ùå $dir%/ - No barrel\")",
      "Bash(else echo \"‚úÖ $dir%/ - Has barrel\")",
      "Bash(if [ -f \"$dirName/index.ts\" ])",
      "Bash(then echo \"‚úÖ $dirName\")",
      "Bash(else echo \"‚ùå $dirName\")",
      "Bash(then echo \"‚úÖ $dir\")",
      "Bash(else echo \"‚ùå $dir\")",
      "Bash(tree:*)",
      "Bash(xargs -0 sed -i \"s|from ''@/hooks/useProviders''|from ''@features/providers''|g\")",
      "Bash(xargs:*)",
      "Bash(git stash:*)",
      "Bash(node:*)",
      "Bash(git check-ignore:*)",
      "Bash(__NEW_LINE__ echo \"@/components/3d/AnimationTimeline\")",
      "Bash(__NEW_LINE__ echo \"@/components/overlay-editor\")",
      "Bash(__NEW_LINE__ echo \"@/config/cubeConstants\")",
      "Bash(__NEW_LINE__ echo \"@/gizmos\")",
      "Bash(__NEW_LINE__ echo \"@/lib/editing-core\")",
      "Bash(timeout 10 npm run dev:*)",
      "Bash(__NEW_LINE__ echo \"=== Checking @/lib/cubeFormations ===\")",
      "Bash(__NEW_LINE__ echo \"=== Checking @features/providers/hooks ===\")",
      "Bash(timeout 15 npm run dev:*)",
      "Bash(timeout 20 npm run dev:*)",
      "Bash(timeout 25 npm run dev:*)",
      "Bash(__NEW_LINE__ grep -r \"export.*providerCapabilityRegistry\" --include=\"*.ts\" --include=\"*.tsx\")",
      "Bash(timeout 30 npm run dev:*)",
      "Bash(__NEW_LINE__ grep -r \"settingsRegistry\\|settingsSchemaRegistry\" --include=\"*.ts\" --include=\"*.tsx\")",
      "Bash(then echo \"‚úì $dir\")",
      "Bash(else echo \"‚úó $dir\")",
      "Bash(__NEW_LINE__ echo \"=== Checking all barrel exports ===\")",
      "Bash(__NEW_LINE__ echo \"Logging exports:\")",
      "Bash(__NEW_LINE__ echo \"Debug exports:\")",
      "Bash(__NEW_LINE__ echo \"Storage exports:\")",
      "Bash(node check-exports.js:*)",
      "Bash(powershell:*)",
      "Bash(echo:*)",
      "Bash(npm run dev:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfix: rename VideoStatus to ProviderStatus and fix generation metrics\n\nBackend fixes:\n- Rename VideoStatus to ProviderStatus throughout codebase\n  - VideoStatus was misleadingly named as it''s used for all generation types (images, videos, etc.)\n  - Updated enum class, docstring, and all usages across 18 files\n  - Updated all documentation references\n\n- Fix PromptVersion metrics AttributeError\n  - Change usage_count to generation_count in lifecycle_service.py\n  - Aligns with actual PromptVersion model field name\n\nFrontend fixes (already committed in 6506edba):\n- Fix SimulationPlayground import error (use @/lib/core instead of @/lib/registries)\n- Add idempotency check to initializePanels to prevent duplicate plugin loading\n- Fix duplicate gizmo console registration by setting flag immediately\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(npm run lint)",
      "Bash(PYTHONPATH=/g/code/pixsim7:$PYTHONPATH python:*)",
      "Bash(alembic upgrade:*)",
      "Bash(alembic current:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfix: prevent duplicate accounts with case-sensitive emails\n\nAdd automatic email normalization to prevent duplicate provider accounts\nthat differ only in email case (e.g., \"Test@example.com\" vs \"test@example.com\").\n\nChanges:\n- Add SQLAlchemy event listener to normalize emails before INSERT/UPDATE\n- Normalize to lowercase and strip whitespace automatically\n- Add database migration to normalize existing account emails\n- Single point of normalization at model level (no scattered code changes)\n\nTechnical Details:\n- Event listener in ProviderAccount model triggers before all DB operations\n- Migration f7g8h9i0j1k2 normalized all existing emails to lowercase\n- Existing unique constraint (email, provider_id, user_id) now more effective\n- Prevents cookie import duplicates from Chrome extension\n\nFixes issue where manual login or cookie imports could create duplicate\naccounts if Pixverse API returned emails with different casing.\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(apps/main/src/features/scene/index.ts )",
      "Bash(apps/main/src/features/scene/ui/ )",
      "Bash(apps/main/src/lib/gameplay-ui-core/comicPanels.ts )",
      "Bash(apps/main/src/lib/plugins/bootstrapSceneViews.ts )",
      "Bash(apps/main/src/lib/plugins/sceneViewPlugin.ts )",
      "Bash(apps/main/src/lib/ui/overlay/overlayWidgetRegistry.ts )",
      "Bash(apps/main/src/lib/ui/overlay/widgets/ComicPanelWidget.tsx )",
      "Bash(apps/main/src/lib/ui/overlay/widgets/SceneViewHost.tsx )",
      "Bash(apps/main/src/modules/plugin-bootstrap/index.ts )",
      "Bash(apps/main/src/modules/scene-builder/index.ts )",
      "Bash(apps/main/src/plugins/scene/ )",
      "Bash(docs/COMIC_PANELS.md )",
      "Bash(docs/PLUGIN_ARCHITECTURE.md)",
      "Bash(python -m py_compile:*)",
      "Bash(dir /b:*)",
      "Bash(findstr:*)",
      "Bash(del \"apps\\main\\src\\features\\controlCenter\\components\\ResizeDivider.tsx\")",
      "Bash(del \"apps\\main\\src\\features\\controlCenter\\components\\ResizableQuickGenerate.tsx\")",
      "Bash(pnpm build:*)",
      "Bash(Get-ChildItem -Path \"G:\\code\\pixsim7\" -Directory -Recurse -Filter \"__pycache__\")",
      "Bash(Remove-Item -Recurse -Force)",
      "Bash(Write-Host \"Cleared all __pycache__ directories\")",
      "Bash(pixsim7/backend/main/domain/action_block.py )",
      "Bash(pixsim7/backend/main/domain/asset_analysis.py )",
      "Bash(pixsim7/backend/main/domain/asset_lineage.py )",
      "Bash(pixsim7/backend/main/domain/enums.py )",
      "Bash(pixsim7/backend/main/domain/generation.py )",
      "Bash(pixsim7/backend/main/shared/schemas/generation_schemas.py )",
      "Bash(pixsim7/backend/main/infrastructure/database/migrations/versions/20251214_0100_normalize_enum_values_to_lowercase.py)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfix: resolve SQLAlchemy enum case mismatch causing LookupError\n\nRoot cause: SQLAlchemy enum columns created without values_callable stored\nmember NAMES (PENDING) instead of VALUES (pending). This caused LookupError\nwhen reading existing data after code changes.\n\nChanges:\n- Add enum_column() helper in enums.py that properly configures SAEnum with\n  values_callable and uses underscore-prefixed names to avoid type cache\n- Add field validators to Generation model and GenerationResponse schema\n  to handle both uppercase (legacy) and lowercase enum values\n- Add migration to normalize existing VARCHAR enum columns to lowercase\n- Update all domain models to use the new enum_column() helper\n\nMigration normalizes: generations.status, generations.operation_type,\ngenerations.billing_state, asset_analyses.status, asset_analyses.analyzer_type\n\nSkips native PostgreSQL enums (already correct): asset_lineage.operation_type,\naction_blocks_db.role\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(pip show:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfix: correct Pixverse image status code mapping\n\n- Add status 10 as completed (was being treated as processing)\n- Add status 9 as failed (was missing)\n- Map status 7 to FILTERED instead of FAILED for proper handling\n\nStatus code mapping:\n- 1, 10 = completed\n- 5 = processing\n- 7 = filtered (content policy)\n- 8, 9 = failed\n\nü§ñ Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(pixsim7/backend/main/api/v1/generations.py )",
      "Bash(pixsim7/backend/main/workers/job_processor.py)",
      "Bash(apps/main/src/features/generation/components/GenerationsPanel.tsx )",
      "Bash(apps/main/src/lib/api/generations.ts)",
      "Bash(npm run type-check:*)",
      "Bash(pnpm run lint)",
      "Bash(python -m pytest:*)",
      "Bash(pip install:*)",
      "Bash(alembic heads:*)",
      "Bash(alembic history:*)",
      "Bash(alembic show:*)",
      "Bash(alembic merge:*)",
      "Bash(alembic revision:*)",
      "Bash(python -c:*)",
      "Bash(bash run_migration.sh:*)",
      "Bash(python -m pixsim7.backend.main.main:*)",
      "Bash(python -m alembic:*)",
      "Bash(set PYTHONIOENCODING=utf-8)",
      "Bash(chcp 6500)",
      "Bash(python -m alembic upgrade head:*)",
      "Bash(python -m alembic downgrade:*)",
      "Bash(del pixsim7backendmaininfrastructuredatabasemigrationsversions20251215_0054_7dfa6dcea8fa_add_plugin_catalog_table.py)",
      "Bash(paste:*)",
      "Bash(apps/main/src/features/generation/stores/generationQueueStore.ts )",
      "Bash(apps/main/src/features/prompts/hooks/useQuickGenerateBindings.ts )",
      "Bash(apps/main/src/features/controlCenter/components/QuickGeneratePanels.tsx )",
      "Bash(apps/main/src/features/controlCenter/components/QuickGenerateModule.tsx)",
      "Bash(docker ps:*)",
      "Bash(mv:*)",
      "Bash(for file in \"./components/dev/DevToolQuickAccess.tsx\" \"./components/inspector/VideoNodeEditor.tsx\" \"./components/panels/dev/DevToolsPanel.tsx\" \"./components/panels/shared/FloatingPanelsManager.tsx\" \"./features/assets/hooks/useAssetsController.ts\" \"./features/controlCenter/components/CubeFormationControlCenter.tsx\" \"./features/controlCenter/components/modules/WorkspaceModule.tsx\" \"./features/controlCenter/components/PanelLauncherModule.tsx\" \"./features/graph/components/graph/GraphEditorHost.tsx\" \"./features/providers/components/ProviderOverviewModule.tsx\")",
      "Bash(do sed -i \"s|from ''@/stores/workspaceStore''|from ''@features/workspace''|g\" \"$file\")",
      "Bash(do sed -i \"s|from ''../stores/workspaceStore''|from ''@features/workspace''|g\" \"$file\")",
      "Bash(node_modules/.bin/tsc:*)",
      "Bash(npx prettier:*)",
      "Bash(do sed -i \"s|from ''@lib/ui/panels''|from ''@features/panels''|g\" \"$file\")",
      "Bash(do sed -i \"s|from ''@/stores/panelConfigStore''|from ''@features/panels''|g\" \"$file\")",
      "Bash(do sed -i \"s|from ''@/components/panels/|from ''@features/panels/components/|g\" \"$file\")",
      "Bash(python -c \"import sys; sys.path.insert(0, ''.''); from pixsim7.backend.main.domain import game, behavior, stats, brain\")",
      "Bash(python update_imports.py:*)"
    ],
    "deny": [],
    "ask": []
  }
}
